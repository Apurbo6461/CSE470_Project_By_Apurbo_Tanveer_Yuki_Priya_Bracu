<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LifeLink - Smart Emergency Health System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #2a6ecc;
            --secondary: #1a4d8c;
            --danger: #e74c3c;
            --warning: #f39c12;
            --success: #27ae60;
            --light: #f8f9fa;
            --dark: #343a40;
            --gray: #6c757d;
            --light-gray: #e9ecef;
        }

        body {
            background-color: #f5f7fa;
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo i {
            font-size: 2.5rem;
        }

        .logo h1 {
            font-size: 2rem;
            font-weight: 700;
        }

        .logo span {
            color: #ffd166;
        }

        .notification-bell {
            position: relative;
            cursor: pointer;
            font-size: 1.5rem;
        }

        .notification-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--danger);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .notification-dropdown {
            display: none;
            position: absolute;
            right: 0;
            top: 40px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            width: 350px;
            z-index: 1000;
        }

        .notification-dropdown.active {
            display: block;
        }

        .notification-header {
            padding: 15px;
            border-bottom: 1px solid var(--light-gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .notification-item {
            padding: 15px;
            border-bottom: 1px solid var(--light-gray);
            cursor: pointer;
        }

        .notification-item.unread {
            background-color: rgba(42, 110, 204, 0.05);
        }

        .notification-item:hover {
            background-color: var(--light-gray);
        }

        .notification-time {
            font-size: 0.8rem;
            color: var(--gray);
            display: block;
            margin-top: 5px;
        }

        .notification-footer {
            padding: 10px;
            text-align: center;
            border-top: 1px solid var(--light-gray);
        }

        .features-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .feature-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            padding: 25px;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light-gray);
        }

        .card-header i {
            font-size: 1.8rem;
            color: var(--primary);
        }

        .card-header h2 {
            font-size: 1.5rem;
            color: var(--dark);
        }

        .availability-toggle {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding: 15px;
            background-color: var(--light);
            border-radius: 10px;
        }

        .status-badge {
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .status-available {
            background-color: rgba(39, 174, 96, 0.2);
            color: var(--success);
        }

        .status-unavailable {
            background-color: rgba(231, 76, 60, 0.2);
            color: var(--danger);
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 30px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--success);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(30px);
        }

        #map {
            height: 300px;
            width: 100%;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid var(--light-gray);
        }

        .donor-list {
            max-height: 250px;
            overflow-y: auto;
        }

        .donor-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            background-color: var(--light);
            transition: background-color 0.2s;
        }

        .donor-item:hover {
            background-color: #e3f2fd;
        }

        .donor-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .donor-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .donor-blood {
            padding: 3px 10px;
            border-radius: 15px;
            background-color: rgba(231, 76, 60, 0.2);
            color: var(--danger);
            font-weight: bold;
            font-size: 0.9rem;
        }

        .emergency-btn {
            background: linear-gradient(135deg, var(--danger), #c0392b);
            color: white;
            border: none;
            padding: 18px 30px;
            font-size: 1.2rem;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            transition: all 0.3s;
            margin-bottom: 20px;
        }

        .emergency-btn:hover {
            background: linear-gradient(135deg, #c0392b, #a93226);
            transform: translateY(-3px);
            box-shadow: 0 7px 15px rgba(231, 76, 60, 0.3);
        }

        .emergency-btn:active {
            transform: translateY(0);
        }

        .emergency-active {
            background: linear-gradient(135deg, var(--warning), #e67e22);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(243, 156, 18, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(243, 156, 18, 0); }
            100% { box-shadow: 0 0 0 0 rgba(243, 156, 18, 0); }
        }

        .emergency-info {
            background-color: #fff8e1;
            border-left: 5px solid var(--warning);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .emergency-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .emergency-detail-item {
            display: flex;
            flex-direction: column;
        }

        .emergency-detail-label {
            font-size: 0.9rem;
            color: var(--gray);
            margin-bottom: 5px;
        }

        .emergency-detail-value {
            font-weight: 600;
            color: var(--dark);
        }

        .countdown {
            font-size: 3rem;
            font-weight: 700;
            color: var(--danger);
            text-align: center;
            margin: 20px 0;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light-gray);
        }

        .modal-title {
            font-size: 1.5rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
        }

        .modal-close:hover {
            color: var(--danger);
        }

        .alert-warning {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .alert-warning i {
            margin-right: 10px;
        }

        .contact-list {
            margin: 20px 0;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            background-color: var(--light);
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }

        .btn {
            padding: 12px 25px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            flex: 1;
            text-align: center;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary);
        }

        .btn-danger {
            background-color: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background-color: #c0392b;
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background-color: var(--primary);
            color: white;
        }

        .rating-section {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            padding: 20px;
            background-color: var(--light);
            border-radius: 10px;
        }

        .stars {
            display: flex;
            gap: 5px;
        }

        .star {
            font-size: 2rem;
            color: #ddd;
            cursor: pointer;
            transition: color 0.2s;
        }

        .star:hover {
            color: #ffd700;
        }

        .star.selected {
            color: #ffd700;
        }

        .rating-description {
            font-size: 1.1rem;
            color: var(--dark);
            font-weight: 600;
        }

        .feedback-form textarea {
            width: 100%;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--light-gray);
            margin-bottom: 15px;
            font-family: inherit;
            resize: vertical;
            min-height: 120px;
        }

        .feedback-form textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .char-count {
            text-align: right;
            font-size: 0.9rem;
            color: var(--gray);
            margin-top: -10px;
            margin-bottom: 15px;
        }

        .review-item {
            padding: 20px;
            border-bottom: 1px solid var(--light-gray);
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .reviewer {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .reviewer-name {
            font-weight: 600;
            color: var(--dark);
        }

        .review-date {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .review-rating {
            color: #ffd700;
        }

        .review-content {
            color: var(--dark);
            margin: 10px 0;
        }

        .review-tags {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .tag {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .tag-positive {
            background-color: rgba(39, 174, 96, 0.2);
            color: var(--success);
        }

        .tag-negative {
            background-color: rgba(231, 76, 60, 0.2);
            color: var(--danger);
        }

        .stats-card {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .stats-value {
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 10px;
        }

        .stats-label {
            text-align: center;
            font-size: 1rem;
            opacity: 0.9;
        }

        .stats-breakdown {
            margin-top: 20px;
        }

        .breakdown-row {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .breakdown-label {
            width: 80px;
            font-size: 0.9rem;
        }

        .breakdown-bar {
            flex: 1;
            height: 10px;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            overflow: hidden;
            margin: 0 10px;
        }

        .breakdown-fill {
            height: 100%;
            background-color: white;
            border-radius: 5px;
        }

        .breakdown-percent {
            width: 40px;
            text-align: right;
            font-size: 0.9rem;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .features-container {
                grid-template-columns: 1fr;
            }
           
            .feature-card {
                padding: 20px;
            }
           
            .header-content {
                flex-direction: column;
                gap: 20px;
            }
           
            .notification-dropdown {
                width: 300px;
                right: -50px;
            }
        }

        .feature-navigation {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
        }

        .nav-btn {
            padding: 12px 25px;
            background-color: white;
            border: 2px solid var(--primary);
            color: var(--primary);
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .nav-btn:hover, .nav-btn.active {
            background-color: var(--primary);
            color: white;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-heartbeat"></i>
                <h1>Life<span>Link</span></h1>
            </div>
            <div class="notification-bell" id="notificationBell">
                <i class="fas fa-bell"></i>
                <span class="notification-count" id="notificationCount">3</span>
                <div class="notification-dropdown" id="notificationDropdown">
                    <div class="notification-header">
                        <h3>Notifications</h3>
                        <button class="btn-outline" id="markAllRead">Mark all read</button>
                    </div>
                    <div class="notification-list" id="notificationList">
                        <!-- Notifications will be populated here -->
                    </div>
                    <div class="notification-footer">
                        <a href="#" style="color: var(--primary); font-weight: 600;">View all notifications</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="feature-navigation">
            <button class="nav-btn active" data-feature="donor">Live Donor Availability</button>
            <button class="nav-btn" data-feature="emergency">Emergency Mode</button>
            <button class="nav-btn" data-feature="feedback">Feedback & Ratings</button>
        </div>

        <div class="features-container">
            <!-- Live Donor Availability Feature -->
            <div class="feature-card" id="donorFeature">
                <div class="card-header">
                    <i class="fas fa-tint"></i>
                    <h2>Live Donor Availability</h2>
                </div>
               
                <div class="availability-toggle">
                    <div>
                        <strong>Current Status:</strong>
                        <span class="status-badge status-available" id="availabilityStatus">Available</span>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="availabilityToggle" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div id="map"></div>

                <h3 style="margin-bottom: 15px;">Nearby Available Donors</h3>
                <div class="donor-list" id="donorList">
                    <!-- Donor list will be populated here -->
                </div>
            </div>

            <!-- Emergency Mode Feature -->
            <div class="feature-card" id="emergencyFeature">
                <div class="card-header">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h2>Emergency Mode</h2>
                </div>
               
                <button class="emergency-btn" id="emergencyButton">
                    <i class="fas fa-bell"></i>
                    ACTIVATE EMERGENCY MODE
                </button>

                <div class="emergency-info" id="emergencyInfo" style="display: none;">
                    <h3 style="color: var(--warning); margin-bottom: 10px;">
                        <i class="fas fa-exclamation-circle"></i> EMERGENCY MODE ACTIVE
                    </h3>
                    <p>Help is on the way! Nearby hospitals and donors have been alerted.</p>
                   
                    <div class="emergency-details">
                        <div class="emergency-detail-item">
                            <span class="emergency-detail-label">Location:</span>
                            <span class="emergency-detail-value" id="emergencyLocation">23.8103° N, 90.4125° E</span>
                        </div>
                        <div class="emergency-detail-item">
                            <span class="emergency-detail-label">Time Activated:</span>
                            <span class="emergency-detail-value" id="emergencyTime">10:45 AM</span>
                        </div>
                        <div class="emergency-detail-item">
                            <span class="emergency-detail-label">Responders:</span>
                            <span class="emergency-detail-value">2 hospitals, 3 donors alerted</span>
                        </div>
                        <div class="emergency-detail-item">
                            <span class="emergency-detail-label">Status:</span>
                            <span class="emergency-detail-value" style="color: var(--success);">Ambulance dispatched</span>
                        </div>
                    </div>
                   
                    <div style="display: flex; gap: 15px; margin-top: 20px;">
                        <button class="btn btn-primary" style="flex: 1;">
                            <i class="fas fa-phone"></i> Call Emergency Services
                        </button>
                        <button class="btn btn-outline" id="cancelEmergency" style="flex: 1;">
                            Cancel Emergency
                        </button>
                    </div>
                </div>
            </div>

            <!-- Feedback & Ratings Feature -->
            <div class="feature-card" id="feedbackFeature">
                <div class="card-header">
                    <i class="fas fa-star"></i>
                    <h2>Feedback & Ratings</h2>
                </div>
               
                <div class="stats-card">
                    <div class="stats-value">4.7</div>
                    <div class="stats-label">Average Rating</div>
                   
                    <div class="stars" style="justify-content: center; margin: 15px 0;">
                        <i class="fas fa-star" style="color: #ffd700;"></i>
                        <i class="fas fa-star" style="color: #ffd700;"></i>
                        <i class="fas fa-star" style="color: #ffd700;"></i>
                        <i class="fas fa-star" style="color: #ffd700;"></i>
                        <i class="fas fa-star-half-alt" style="color: #ffd700;"></i>
                    </div>
                   
                    <div class="stats-label">Based on 128 reviews</div>
                </div>

                <h3 style="margin-bottom: 15px;">Submit Your Feedback</h3>
                <div class="rating-section">
                    <div class="stars" id="ratingStars">
                        <i class="fas fa-star star" data-rating="1"></i>
                        <i class="fas fa-star star" data-rating="2"></i>
                        <i class="fas fa-star star" data-rating="3"></i>
                        <i class="fas fa-star star" data-rating="4"></i>
                        <i class="fas fa-star star" data-rating="5"></i>
                    </div>
                    <div class="rating-description" id="ratingDescription">Select a rating</div>
                </div>

                <div class="feedback-form">
                    <textarea id="feedbackComment" placeholder="Share your experience in detail..." maxlength="500"></textarea>
                    <div class="char-count">
                        <span id="charCount">0</span>/500 characters
                    </div>
                   
                    <input type="text" id="feedbackPros" placeholder="What did you like? (e.g., Professional staff, clean facilities)" style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--light-gray); margin-bottom: 15px;">
                   
                    <input type="text" id="feedbackCons" placeholder="What could be improved? (e.g., Waiting time, communication)" style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--light-gray); margin-bottom: 15px;">
                   
                    <button class="btn btn-primary" id="submitFeedback" style="width: 100%;">
                        <i class="fas fa-paper-plane"></i> Submit Feedback
                    </button>
                </div>

                <h3 style="margin: 30px 0 15px 0;">Recent Reviews</h3>
                <div class="review-list" id="reviewList">
                    <!-- Reviews will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Emergency Confirmation Modal -->
    <div class="modal" id="emergencyModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-exclamation-triangle" style="color: var(--warning);"></i>
                    Confirm Emergency Activation
                </div>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
           
            <div class="alert-warning">
                <i class="fas fa-exclamation-circle"></i>
                <strong>Warning:</strong> This will alert nearby hospitals and blood donors
            </div>
           
            <p>Emergency services will be notified of your location and medical information.</p>
           
            <div class="contact-list">
                <h4>Emergency Contacts:</h4>
                <div class="contact-item">
                    <i class="fas fa-user"></i>
                    <div>
                        <strong>John Doe</strong> - Family Member
                    </div>
                </div>
                <div class="contact-item">
                    <i class="fas fa-user"></i>
                    <div>
                        <strong>Sarah Smith</strong> - Emergency Contact
                    </div>
                </div>
            </div>
           
            <div class="countdown" id="countdown">5</div>
           
            <div class="modal-actions">
                <button class="btn btn-danger" id="confirmEmergency">Activate Emergency</button>
                <button class="btn btn-outline" id="cancelModal">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-check-circle" style="color: var(--success);"></i>
                    Success!
                </div>
                <button class="modal-close" id="closeSuccessModal">&times;</button>
            </div>
           
            <p id="successMessage" style="text-align: center; padding: 20px 0; font-size: 1.1rem;">
                Your feedback has been submitted successfully.
            </p>
           
            <div class="modal-actions">
                <button class="btn btn-primary" id="closeSuccessBtn">OK</button>
            </div>
        </div>
    </div>

    <script>
        // Sample Data
        const donors = [
            { id: 1, name: "Alex Johnson", bloodGroup: "O+", distance: "1.2", available: true, lat: 23.811, lng: 90.413 },
            { id: 2, name: "Maria Garcia", bloodGroup: "A-", distance: "2.5", available: true, lat: 23.809, lng: 90.411 },
            { id: 3, name: "David Smith", bloodGroup: "B+", distance: "3.1", available: true, lat: 23.812, lng: 90.415 },
            { id: 4, name: "Lisa Wang", bloodGroup: "AB+", distance: "4.3", available: false, lat: 23.808, lng: 90.410 },
            { id: 5, name: "Robert Kim", bloodGroup: "O-", distance: "5.0", available: true, lat: 23.814, lng: 90.409 }
        ];

        const notifications = [
            { id: 1, title: "Appointment Reminder", message: "You have an appointment with Dr. Smith in 1 hour", time: "10:30 AM", read: false },
            { id: 2, title: "Blood Request", message: "Urgent blood needed for O+ at City Hospital", time: "9:45 AM", read: false },
            { id: 3, title: "Emergency Alert", message: "Emergency mode activated in your area", time: "9:15 AM", read: true },
            { id: 4, title: "Donor Verified", message: "Your blood donor registration has been verified", time: "Yesterday", read: true },
            { id: 5, title: "New Message", message: "Dr. Johnson sent you a new message", time: "Yesterday", read: true }
        ];

        const reviews = [
            { id: 1, name: "Michael Brown", rating: 5, date: "2023-10-15", comment: "Excellent service! The doctor was very professional and caring.", pros: "Professional staff", cons: "Long waiting time" },
            { id: 2, name: "Sarah Johnson", rating: 4, date: "2023-10-10", comment: "Good experience overall. The hospital was clean and well-organized.", pros: "Clean facilities", cons: "Parking was difficult" },
            { id: 3, name: "James Wilson", rating: 5, date: "2023-10-05", comment: "LifeLink saved my life during an emergency. The response time was amazing!", pros: "Fast emergency response", cons: "None" }
        ];

        const ratingDescriptions = [
            "Very Poor",
            "Poor",
            "Average",
            "Good",
            "Excellent"
        ];

        // DOM Elements
        const notificationBell = document.getElementById('notificationBell');
        const notificationDropdown = document.getElementById('notificationDropdown');
        const notificationCount = document.getElementById('notificationCount');
        const notificationList = document.getElementById('notificationList');
        const markAllReadBtn = document.getElementById('markAllRead');
        const availabilityToggle = document.getElementById('availabilityToggle');
        const availabilityStatus = document.getElementById('availabilityStatus');
        const donorList = document.getElementById('donorList');
        const emergencyButton = document.getElementById('emergencyButton');
        const emergencyInfo = document.getElementById('emergencyInfo');
        const emergencyModal = document.getElementById('emergencyModal');
        const closeModal = document.getElementById('closeModal');
        const cancelModal = document.getElementById('cancelModal');
        const confirmEmergency = document.getElementById('confirmEmergency');
        const countdown = document.getElementById('countdown');
        const cancelEmergency = document.getElementById('cancelEmergency');
        const ratingStars = document.querySelectorAll('.star');
        const ratingDescription = document.getElementById('ratingDescription');
        const feedbackComment = document.getElementById('feedbackComment');
        const charCount = document.getElementById('charCount');
        const submitFeedback = document.getElementById('submitFeedback');
        const reviewList = document.getElementById('reviewList');
        const successModal = document.getElementById('successModal');
        const closeSuccessModal = document.getElementById('closeSuccessModal');
        const closeSuccessBtn = document.getElementById('closeSuccessBtn');
        const successMessage = document.getElementById('successMessage');
        const navBtns = document.querySelectorAll('.nav-btn');
        const featureCards = document.querySelectorAll('.feature-card');

        // State Variables
        let currentRating = 0;
        let emergencyActive = false;
        let emergencyCountdown = 5;
        let countdownInterval = null;
        let map = null;
        let userLat = 23.8103;
        let userLng = 90.4125;

        // Initialize the application
        function init() {
            // Initialize map
            initMap();
           
            // Populate donor list
            populateDonorList();
           
            // Populate notifications
            populateNotifications();
           
            // Populate reviews
            populateReviews();
           
            // Setup event listeners
            setupEventListeners();
           
            // Show donor feature by default
            showFeature('donor');
        }

        // Initialize Leaflet map
        function initMap() {
            map = L.map('map').setView([userLat, userLng], 13);
           
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap contributors'
            }).addTo(map);
           
            // Add user marker
            L.marker([userLat, userLng])
                .addTo(map)
                .bindPopup('Your Location')
                .openPopup();
           
            // Add donor markers
            donors.forEach(donor => {
                if (donor.available) {
                    const marker = L.marker([donor.lat, donor.lng])
                        .addTo(map)
                        .bindPopup(`
                            <strong>${donor.name}</strong><br>
                            Blood Group: ${donor.bloodGroup}<br>
                            Distance: ${donor.distance} km<br>
                            Status: Available
                        `);
                   
                    // Customize marker based on blood group
                    marker._icon.classList.add('donor-marker');
                    marker._icon.innerHTML = donor.bloodGroup;
                    marker._icon.style.backgroundColor = donor.available ? '#27ae60' : '#e74c3c';
                    marker._icon.style.color = 'white';
                    marker._icon.style.borderRadius = '50%';
                    marker._icon.style.width = '30px';
                    marker._icon.style.height = '30px';
                    marker._icon.style.display = 'flex';
                    marker._icon.style.alignItems = 'center';
                    marker._icon.style.justifyContent = 'center';
                    marker._icon.style.fontWeight = 'bold';
                }
            });
        }

        // Populate donor list
        function populateDonorList() {
            donorList.innerHTML = '';
           
            donors.forEach(donor => {
                const donorItem = document.createElement('div');
                donorItem.className = 'donor-item';
               
                donorItem.innerHTML = `
                    <div class="donor-info">
                        <div class="donor-avatar">${donor.name.charAt(0)}</div>
                        <div>
                            <div style="font-weight: 600;">${donor.name}</div>
                            <div style="font-size: 0.9rem; color: var(--gray);">${donor.distance} km away</div>
                        </div>
                    </div>
                    <div>
                        <span class="donor-blood">${donor.bloodGroup}</span>
                        <div style="margin-top: 5px; font-size: 0.8rem; color: ${donor.available ? 'var(--success)' : 'var(--danger)'};">
                            ${donor.available ? 'Available' : 'Unavailable'}
                        </div>
                    </div>
                `;
               
                donorList.appendChild(donorItem);
            });
        }

        // Populate notifications
        function populateNotifications() {
            notificationList.innerHTML = '';
           
            notifications.forEach(notification => {
                const notificationItem = document.createElement('div');
                notificationItem.className = `notification-item ${notification.read ? '' : 'unread'}`;
                notificationItem.dataset.id = notification.id;
               
                notificationItem.innerHTML = `
                    <div style="font-weight: 600; margin-bottom: 5px;">${notification.title}</div>
                    <div style="color: var(--gray); font-size: 0.9rem;">${notification.message}</div>
                    <span class="notification-time">${notification.time}</span>
                `;
               
                notificationItem.addEventListener('click', () => {
                    markNotificationAsRead(notification.id);
                });
               
                notificationList.appendChild(notificationItem);
            });
           
            // Update notification count
            const unreadCount = notifications.filter(n => !n.read).length;
            notificationCount.textContent = unreadCount;
            notificationCount.style.display = unreadCount > 0 ? 'flex' : 'none';
        }

        // Populate reviews
        function populateReviews() {
            reviewList.innerHTML = '';
           
            reviews.forEach(review => {
                const reviewItem = document.createElement('div');
                reviewItem.className = 'review-item';
               
                // Create star rating
                let starsHtml = '';
                for (let i = 1; i <= 5; i++) {
                    if (i <= review.rating) {
                        starsHtml += '<i class="fas fa-star" style="color: #ffd700;"></i>';
                    } else {
                        starsHtml += '<i class="far fa-star" style="color: #ddd;"></i>';
                    }
                }
               
                reviewItem.innerHTML = `
                    <div class="review-header">
                        <div class="reviewer">
                            <div class="donor-avatar" style="width: 35px; height: 35px; font-size: 0.9rem;">${review.name.charAt(0)}</div>
                            <div>
                                <div class="reviewer-name">${review.name}</div>
                                <div class="review-rating">${starsHtml}</div>
                            </div>
                        </div>
                        <div class="review-date">${new Date(review.date).toLocaleDateString()}</div>
                    </div>
                    <div class="review-content">${review.comment}</div>
                    <div class="review-tags">
                        ${review.pros ? `<span class="tag tag-positive">✓ ${review.pros}</span>` : ''}
                        ${review.cons ? `<span class="tag tag-negative">✗ ${review.cons}</span>` : ''}
                    </div>
                `;
               
                reviewList.appendChild(reviewItem);
            });
        }

        // Setup event listeners
        function setupEventListeners() {
            // Notification bell click
            notificationBell.addEventListener('click', (e) => {
                e.stopPropagation();
                notificationDropdown.classList.toggle('active');
            });
           
            // Close notification dropdown when clicking outside
            document.addEventListener('click', (e) => {
                if (!notificationBell.contains(e.target)) {
                    notificationDropdown.classList.remove('active');
                }
            });
           
            // Mark all notifications as read
            markAllReadBtn.addEventListener('click', () => {
                notifications.forEach(n => n.read = true);
                populateNotifications();
            });
           
            // Availability toggle
            availabilityToggle.addEventListener('change', function() {
                const isAvailable = this.checked;
                availabilityStatus.textContent = isAvailable ? 'Available' : 'Unavailable';
                availabilityStatus.className = `status-badge ${isAvailable ? 'status-available' : 'status-unavailable'}`;
               
                // Show confirmation
                showSuccessMessage(`Your donor status has been updated to ${isAvailable ? 'Available' : 'Unavailable'}`);
            });
           
            // Emergency button click
            emergencyButton.addEventListener('click', () => {
                if (!emergencyActive) {
                    emergencyModal.classList.add('active');
                    startCountdown();
                }
            });
           
            // Close modal buttons
            closeModal.addEventListener('click', () => {
                emergencyModal.classList.remove('active');
                stopCountdown();
            });
           
            cancelModal.addEventListener('click', () => {
                emergencyModal.classList.remove('active');
                stopCountdown();
            });
           
            closeSuccessModal.addEventListener('click', () => {
                successModal.classList.remove('active');
            });
           
            closeSuccessBtn.addEventListener('click', () => {
                successModal.classList.remove('active');
            });
           
            // Confirm emergency
            confirmEmergency.addEventListener('click', () => {
                emergencyModal.classList.remove('active');
                activateEmergencyMode();
            });
           
            // Cancel emergency
            cancelEmergency.addEventListener('click', () => {
                deactivateEmergencyMode();
            });
           
            // Rating stars
            ratingStars.forEach(star => {
                star.addEventListener('click', function() {
                    const rating = parseInt(this.dataset.rating);
                    setRating(rating);
                });
               
                star.addEventListener('mouseover', function() {
                    const rating = parseInt(this.dataset.rating);
                    highlightStars(rating);
                    ratingDescription.textContent = ratingDescriptions[rating - 1];
                });
            });
           
            // Reset stars on mouseout
            document.getElementById('ratingStars').addEventListener('mouseleave', () => {
                highlightStars(currentRating);
                ratingDescription.textContent = currentRating > 0 ? ratingDescriptions[currentRating - 1] : 'Select a rating';
            });
           
            // Character count for feedback
            feedbackComment.addEventListener('input', function() {
                charCount.textContent = this.value.length;
            });
           
            // Submit feedback
            submitFeedback.addEventListener('click', submitFeedbackForm);
           
            // Navigation buttons
            navBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const feature = this.dataset.feature;
                    showFeature(feature);
                   
                    // Update active button
                    navBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });
        }

        // Show specific feature
        function showFeature(feature) {
            featureCards.forEach(card => {
                card.style.display = 'none';
            });
           
            document.getElementById(`${feature}Feature`).style.display = 'block';
        }

        // Mark notification as read
        function markNotificationAsRead(id) {
            const notification = notifications.find(n => n.id === id);
            if (notification && !notification.read) {
                notification.read = true;
                populateNotifications();
            }
        }

        // Start emergency countdown
        function startCountdown() {
            emergencyCountdown = 5;
            countdown.textContent = emergencyCountdown;
           
            countdownInterval = setInterval(() => {
                emergencyCountdown--;
                countdown.textContent = emergencyCountdown;
               
                if (emergencyCountdown <= 0) {
                    clearInterval(countdownInterval);
                    confirmEmergency.click();
                }
            }, 1000);
        }

        // Stop emergency countdown
        function stopCountdown() {
            clearInterval(countdownInterval);
            emergencyCountdown = 5;
            countdown.textContent = emergencyCountdown;
        }

        // Activate emergency mode
        function activateEmergencyMode() {
            emergencyActive = true;
            emergencyButton.classList.add('emergency-active');
            emergencyButton.innerHTML = '<i class="fas fa-exclamation-circle"></i> EMERGENCY MODE ACTIVE';
            emergencyInfo.style.display = 'block';
           
            // Update emergency time
            const now = new Date();
            document.getElementById('emergencyTime').textContent = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
           
            // Send emergency notification
            notifications.unshift({
                id: notifications.length + 1,
                title: "Emergency Activated",
                message: "Emergency mode activated. Nearby hospitals and donors have been alerted.",
                time: "Just now",
                read: false
            });
           
            populateNotifications();
           
            // Show success message
            showSuccessMessage("Emergency mode activated! Help is on the way.");
        }

        // Deactivate emergency mode
        function deactivateEmergencyMode() {
            emergencyActive = false;
            emergencyButton.classList.remove('emergency-active');
            emergencyButton.innerHTML = '<i class="fas fa-bell"></i> ACTIVATE EMERGENCY MODE';
            emergencyInfo.style.display = 'none';
           
            // Send notification
            notifications.unshift({
                id: notifications.length + 1,
                title: "Emergency Deactivated",
                message: "Emergency mode has been deactivated.",
                time: "Just now",
                read: false
            });
           
            populateNotifications();
           
            // Show success message
            showSuccessMessage("Emergency mode deactivated.");
        }

        // Set rating
        function setRating(rating) {
            currentRating = rating;
            highlightStars(rating);
            ratingDescription.textContent = ratingDescriptions[rating - 1];
        }

        // Highlight stars
        function highlightStars(rating) {
            ratingStars.forEach(star => {
                const starRating = parseInt(star.dataset.rating);
                if (starRating <= rating) {
                    star.classList.add('selected');
                    star.classList.remove('far');
                    star.classList.add('fas');
                } else {
                    star.classList.remove('selected');
                    star.classList.remove('fas');
                    star.classList.add('far');
                }
            });
        }

        // Submit feedback form
        function submitFeedbackForm() {
            if (currentRating === 0) {
                alert('Please select a rating before submitting feedback.');
                return;
            }
           
            const comment = feedbackComment.value.trim();
            if (comment.length < 10) {
                alert('Please provide more details in your feedback (minimum 10 characters).');
                return;
            }
           
            const pros = document.getElementById('feedbackPros').value.trim();
            const cons = document.getElementById('feedbackCons').value.trim();
           
            // Create new review
            const newReview = {
                id: reviews.length + 1,
                name: "You",
                rating: currentRating,
                date: new Date().toISOString().split('T')[0],
                comment: comment,
                pros: pros || undefined,
                cons: cons || undefined
            };
           
            // Add to reviews array
            reviews.unshift(newReview);
           
            // Update UI
            populateReviews();
           
            // Reset form
            feedbackComment.value = '';
            document.getElementById('feedbackPros').value = '';
            document.getElementById('feedbackCons').value = '';
            charCount.textContent = '0';
            setRating(0);
           
            // Show success message
            showSuccessMessage("Thank you for your feedback! Your review has been submitted.");
        }

        // Show success message
        function showSuccessMessage(message) {
            successMessage.textContent = message;
            successModal.classList.add('active');
        }

        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LifeLink - Home</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="https    ://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <i class="fas fa-tint"></i>
                <span>LifeLink</span>   